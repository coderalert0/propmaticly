<nav class="navbar navbar-expand-lg">
  <div class="container-fluid p-2 d-flex align-items-center">

    <!-- Logo: Full Width on Mobile, Normal on Larger Screens -->
    <div class="d-flex align-items-center w-100 w-lg-auto">
      <%= link_to root_path, class: "flex-grow-1 text-center text-lg-start" do %>
        <%= image_tag('logo.png', height: '50') %>
      <% end %>

      <!-- Waffle Icon (Navbar Toggler) for Mobile -->
      <button class="navbar-toggler ms-2 d-lg-none" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>

    <!-- Collapsible Navbar Content -->
    <div class="collapse navbar-collapse justify-content-between" id="navbarContent">
      <!-- Navigation Links -->
      <ul class="navbar-nav align-items-center">
        <% if user_signed_in? %>
          <li class="nav-item h5">
            <%= link_to "Dashboard", root_path, class: "me-4" %>
          </li>
          <% if current_user&.admin? %>
            <li class="nav-item h5">
              <%= link_to "Users", users_path, class: "me-4" %>
            </li>
          <% end %>
        <% end %>
      </ul>

      <!-- Right-Aligned User Dropdown (Hidden on Mobile) -->
      <ul class="navbar-nav ms-auto d-none d-lg-block">
        <% if user_signed_in? %>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
              Hello, <%= current_user&.first_name %>
            </a>
            <ul class="dropdown-menu dropdown-menu-end">
              <% unless current_user.admin? %>
                <li>
                  <%= link_to 'Edit Profile', '#', class: 'dropdown-item', data: { controller: 'modal', action: 'modal#open', bs_target: "#editUserProfileModal#{current_user.id}" } %>
                </li>
                <li><hr class="dropdown-divider"></li>
            <% end %>
              <li>
                <%= link_to "Sign Out", destroy_user_session_path, method: :delete, class: "dropdown-item text-danger" %>
              </li>
            </ul>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</nav>

<%= render('user_profiles/edit', user: current_user) if current_user && !current_user.admin? %>
